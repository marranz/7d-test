{
    "version": 3,
    "terraform_version": "0.10.1",
    "serial": 12,
    "lineage": "d3cc7bd1-f9ea-4a1a-8614-ef34ddfdd2fe",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {
                "address": {
                    "sensitive": false,
                    "type": "string",
                    "value": "7digital-arranzm-elb-189493676.eu-west-2.elb.amazonaws.com"
                }
            },
            "resources": {
                "data.aws_availability_zones.available": {
                    "type": "aws_availability_zones",
                    "depends_on": [],
                    "primary": {
                        "id": "2017-10-11 17:00:28.547708553 +0000 UTC",
                        "attributes": {
                            "id": "2017-10-11 17:00:28.547708553 +0000 UTC",
                            "names.#": "2",
                            "names.0": "eu-west-2a",
                            "names.1": "eu-west-2b"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "vpc"
            ],
            "outputs": {
                "private_subnet_1_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "subnet-0bf78a70"
                },
                "private_subnet_2_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "subnet-b2f178ff"
                },
                "public_subnet_1_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "subnet-8afa87f1"
                },
                "public_subnet_2_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "subnet-85ff76c8"
                },
                "vpc_cidr_block": {
                    "sensitive": false,
                    "type": "string",
                    "value": "192.168.0.0/16"
                },
                "vpc_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpc-579dde3e"
                }
            },
            "resources": {
                "aws_eip.nat_gw1": {
                    "type": "aws_eip",
                    "depends_on": [],
                    "primary": {
                        "id": "eipalloc-ce0276e0",
                        "attributes": {
                            "association_id": "eipassoc-68bee946",
                            "domain": "vpc",
                            "id": "eipalloc-ce0276e0",
                            "instance": "",
                            "network_interface": "eni-56121504",
                            "private_ip": "192.168.1.63",
                            "public_ip": "35.177.246.138",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_eip.nat_gw2": {
                    "type": "aws_eip",
                    "depends_on": [],
                    "primary": {
                        "id": "eipalloc-4a0c7864",
                        "attributes": {
                            "association_id": "eipassoc-aebfe880",
                            "domain": "vpc",
                            "id": "eipalloc-4a0c7864",
                            "instance": "",
                            "network_interface": "eni-b0755698",
                            "private_ip": "192.168.2.16",
                            "public_ip": "35.176.206.169",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_internet_gateway.gw": {
                    "type": "aws_internet_gateway",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "igw-58e16931",
                        "attributes": {
                            "id": "igw-58e16931",
                            "tags.%": "1",
                            "tags.Name": "igw-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_nat_gateway.gw1": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_eip.nat_gw1",
                        "aws_subnet.public_subnet_1"
                    ],
                    "primary": {
                        "id": "nat-0127e7ea1999ad5b7",
                        "attributes": {
                            "allocation_id": "eipalloc-ce0276e0",
                            "id": "nat-0127e7ea1999ad5b7",
                            "network_interface_id": "eni-56121504",
                            "private_ip": "192.168.1.63",
                            "public_ip": "35.177.246.138",
                            "subnet_id": "subnet-8afa87f1",
                            "tags.%": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_nat_gateway.gw2": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_eip.nat_gw2",
                        "aws_subnet.public_subnet_2"
                    ],
                    "primary": {
                        "id": "nat-067d3b208d3ae9051",
                        "attributes": {
                            "allocation_id": "eipalloc-4a0c7864",
                            "id": "nat-067d3b208d3ae9051",
                            "network_interface_id": "eni-b0755698",
                            "private_ip": "192.168.2.16",
                            "public_ip": "35.176.206.169",
                            "subnet_id": "subnet-85ff76c8",
                            "tags.%": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_network_acl.vpc_acl_permissive": {
                    "type": "aws_network_acl",
                    "depends_on": [
                        "aws_subnet.private_subnet_1",
                        "aws_subnet.private_subnet_2",
                        "aws_subnet.public_subnet_1",
                        "aws_subnet.public_subnet_2",
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "acl-f395c59a",
                        "attributes": {
                            "egress.#": "1",
                            "egress.1564094202.action": "allow",
                            "egress.1564094202.cidr_block": "0.0.0.0/0",
                            "egress.1564094202.from_port": "0",
                            "egress.1564094202.icmp_code": "0",
                            "egress.1564094202.icmp_type": "0",
                            "egress.1564094202.ipv6_cidr_block": "",
                            "egress.1564094202.protocol": "-1",
                            "egress.1564094202.rule_no": "1",
                            "egress.1564094202.to_port": "0",
                            "id": "acl-f395c59a",
                            "ingress.#": "1",
                            "ingress.1564094202.action": "allow",
                            "ingress.1564094202.cidr_block": "0.0.0.0/0",
                            "ingress.1564094202.from_port": "0",
                            "ingress.1564094202.icmp_code": "0",
                            "ingress.1564094202.icmp_type": "0",
                            "ingress.1564094202.ipv6_cidr_block": "",
                            "ingress.1564094202.protocol": "-1",
                            "ingress.1564094202.rule_no": "1",
                            "ingress.1564094202.to_port": "0",
                            "subnet_ids.#": "4",
                            "subnet_ids.2470565573": "subnet-b2f178ff",
                            "subnet_ids.3686372886": "subnet-8afa87f1",
                            "subnet_ids.3809063202": "subnet-85ff76c8",
                            "subnet_ids.846308308": "subnet-0bf78a70",
                            "tags.%": "1",
                            "tags.Name": "acl-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route.private1_default": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.gw1",
                        "aws_route_table.private1"
                    ],
                    "primary": {
                        "id": "r-rtb-b4e7bedd1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-b4e7bedd1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-0127e7ea1999ad5b7",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-b4e7bedd",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route.private2_default": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.gw2",
                        "aws_route_table.private2"
                    ],
                    "primary": {
                        "id": "r-rtb-53e6bf3a1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-53e6bf3a1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-067d3b208d3ae9051",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-53e6bf3a",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.private1": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-b4e7bedd",
                        "attributes": {
                            "id": "rtb-b4e7bedd",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.3160779615.cidr_block": "0.0.0.0/0",
                            "route.3160779615.egress_only_gateway_id": "",
                            "route.3160779615.gateway_id": "",
                            "route.3160779615.instance_id": "",
                            "route.3160779615.ipv6_cidr_block": "",
                            "route.3160779615.nat_gateway_id": "nat-0127e7ea1999ad5b7",
                            "route.3160779615.network_interface_id": "",
                            "route.3160779615.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "private-route-1-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.private2": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-53e6bf3a",
                        "attributes": {
                            "id": "rtb-53e6bf3a",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.1926631490.cidr_block": "0.0.0.0/0",
                            "route.1926631490.egress_only_gateway_id": "",
                            "route.1926631490.gateway_id": "",
                            "route.1926631490.instance_id": "",
                            "route.1926631490.ipv6_cidr_block": "",
                            "route.1926631490.nat_gateway_id": "nat-067d3b208d3ae9051",
                            "route.1926631490.network_interface_id": "",
                            "route.1926631490.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "private-route-2-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.public": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_internet_gateway.gw",
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-901840f9",
                        "attributes": {
                            "id": "rtb-901840f9",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.1394786587.cidr_block": "0.0.0.0/0",
                            "route.1394786587.egress_only_gateway_id": "",
                            "route.1394786587.gateway_id": "igw-58e16931",
                            "route.1394786587.instance_id": "",
                            "route.1394786587.ipv6_cidr_block": "",
                            "route.1394786587.nat_gateway_id": "",
                            "route.1394786587.network_interface_id": "",
                            "route.1394786587.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "public-route-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.private_1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private1",
                        "aws_subnet.private_subnet_1"
                    ],
                    "primary": {
                        "id": "rtbassoc-f8756191",
                        "attributes": {
                            "id": "rtbassoc-f8756191",
                            "route_table_id": "rtb-b4e7bedd",
                            "subnet_id": "subnet-0bf78a70"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.private_2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private2",
                        "aws_subnet.private_subnet_2"
                    ],
                    "primary": {
                        "id": "rtbassoc-a64b5fcf",
                        "attributes": {
                            "id": "rtbassoc-a64b5fcf",
                            "route_table_id": "rtb-53e6bf3a",
                            "subnet_id": "subnet-b2f178ff"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.public_1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_subnet.public_subnet_1"
                    ],
                    "primary": {
                        "id": "rtbassoc-7674601f",
                        "attributes": {
                            "id": "rtbassoc-7674601f",
                            "route_table_id": "rtb-901840f9",
                            "subnet_id": "subnet-8afa87f1"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.public_2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_subnet.public_subnet_2"
                    ],
                    "primary": {
                        "id": "rtbassoc-6d4b5f04",
                        "attributes": {
                            "id": "rtbassoc-6d4b5f04",
                            "route_table_id": "rtb-901840f9",
                            "subnet_id": "subnet-85ff76c8"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.private_subnet_1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-0bf78a70",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "eu-west-2a",
                            "cidr_block": "192.168.3.0/24",
                            "id": "subnet-0bf78a70",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "1",
                            "tags.Name": "subnet-private-1-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.private_subnet_2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-b2f178ff",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "eu-west-2b",
                            "cidr_block": "192.168.4.0/24",
                            "id": "subnet-b2f178ff",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "1",
                            "tags.Name": "subnet-private-2-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.public_subnet_1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-8afa87f1",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "eu-west-2a",
                            "cidr_block": "192.168.1.0/24",
                            "id": "subnet-8afa87f1",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "1",
                            "tags.Name": "subnet-public-1-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.public_subnet_2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-85ff76c8",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "eu-west-2b",
                            "cidr_block": "192.168.2.0/24",
                            "id": "subnet-85ff76c8",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "1",
                            "tags.Name": "subnet-public-2-7digital-arranzm-test",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_vpc.main": {
                    "type": "aws_vpc",
                    "depends_on": [],
                    "primary": {
                        "id": "vpc-579dde3e",
                        "attributes": {
                            "assign_generated_ipv6_cidr_block": "false",
                            "cidr_block": "192.168.0.0/16",
                            "default_network_acl_id": "acl-d496c6bd",
                            "default_route_table_id": "rtb-50e6bf39",
                            "default_security_group_id": "sg-344ea05c",
                            "dhcp_options_id": "dopt-f120c298",
                            "enable_dns_hostnames": "true",
                            "enable_dns_support": "true",
                            "id": "vpc-579dde3e",
                            "instance_tenancy": "default",
                            "main_route_table_id": "rtb-50e6bf39",
                            "tags.%": "1",
                            "tags.Name": "7digital-arranzm-test"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "wp"
            ],
            "outputs": {
                "address": {
                    "sensitive": false,
                    "type": "string",
                    "value": "7digital-arranzm-elb-189493676.eu-west-2.elb.amazonaws.com"
                },
                "init": {
                    "sensitive": false,
                    "type": "string",
                    "value": "#!/bin/bash\napt-get update\napt-get install apache2  libapache2-mod-php7.0 php7.0-mysql wget curl mysql-client -y\n\n\ncd /tmp/\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\n\nchmod +x wp-cli.phar\nmv wp-cli.phar /usr/local/bin/wp\n\ncd /var/www/html\nrm index.html\nwp --allow-root core download --version=4.7\nchown www-data /var/www/html -R\ncp wp-config-sample.php wp-config.php\n\nsed -i s/\"database_name_here\"/\"wordpress\"/ /var/www/html/wp-config.php\nsed -i s/\"username_here\"/\"wordpress\"/ /var/www/html/wp-config.php\nsed -i s/\"password_here\"/\"wordpress12345\"/ /var/www/html/wp-config.php\nsed -i s/\"localhost\"/\"terraform-20171011165717373500000001.cdoadcw2ssuk.eu-west-2.rds.amazonaws.com\"/ /var/www/html/wp-config.php\n\necho \"\u003c?php echo 'healthy'; ?\u003e\" \u003e /var/www/html/healthcheck.php\n\n#This will populate the database only if it does not exists\nwp --allow-root core install --url=7digital-arranzm-elb-189493676.eu-west-2.elb.amazonaws.com --title=\"Page title\" --admin_user=\"admin\" --admin_password=\"wordpress12345\" --admin_email=\"m.arranz.perez@gmail.com\" --path=/var/www/html/\n\npost_number=$(wp --allow-root post list --field=ID|wc -l)\n\n\n#This will run only first time\nif [ \"$post_number\" -eq \"1\" ]\nthen\nwp --allow-root post delete 1\nwp --allow-root post create --post_type=post --post_title='Lorem ipsum' --post_content=\"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. \u003cimg src='https://img.discogs.com/jKTmuxcsYe2TqcahU3QqVXJLssU=/fit-in/600x600/filters:strip_icc():format(jpeg):mode_rgb():quality(90)/discogs-images/R-1873013-1471100381-3022.jpeg.jpg'\u003e\" --post_status=publish\nfi\n\nwait 10\nservice apache2 restart\n"
                }
            },
            "resources": {
                "aws_autoscaling_group.wp": {
                    "type": "aws_autoscaling_group",
                    "depends_on": [
                        "aws_elb.elb",
                        "aws_launch_configuration.wp"
                    ],
                    "primary": {
                        "id": "7digital-arranzm-elb",
                        "attributes": {
                            "arn": "arn:aws:autoscaling:eu-west-2:140541832011:autoScalingGroup:2f643c74-0949-4fcc-a9ec-ebb852f1a92a:autoScalingGroupName/7digital-arranzm-elb",
                            "availability_zones.#": "2",
                            "availability_zones.1501760113": "eu-west-2b",
                            "availability_zones.3230292939": "eu-west-2a",
                            "default_cooldown": "300",
                            "desired_capacity": "1",
                            "force_delete": "true",
                            "health_check_grace_period": "300",
                            "health_check_type": "ELB",
                            "id": "7digital-arranzm-elb",
                            "launch_configuration": "7digital-arranzm20171011170022403700000002",
                            "load_balancers.#": "1",
                            "load_balancers.1983899219": "7digital-arranzm-elb",
                            "max_size": "1",
                            "metrics_granularity": "1Minute",
                            "min_size": "0",
                            "name": "7digital-arranzm-elb",
                            "placement_group": "",
                            "protect_from_scale_in": "false",
                            "suspended_processes.#": "0",
                            "tag.#": "0",
                            "target_group_arns.#": "0",
                            "termination_policies.#": "0",
                            "vpc_zone_identifier.#": "2",
                            "vpc_zone_identifier.3686372886": "subnet-8afa87f1",
                            "vpc_zone_identifier.3809063202": "subnet-85ff76c8",
                            "wait_for_capacity_timeout": "10m"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "delete": 600000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_db_instance.wp": {
                    "type": "aws_db_instance",
                    "depends_on": [
                        "aws_db_subnet_group.wp",
                        "aws_security_group.rds"
                    ],
                    "primary": {
                        "id": "terraform-20171011165717373500000001",
                        "attributes": {
                            "address": "terraform-20171011165717373500000001.cdoadcw2ssuk.eu-west-2.rds.amazonaws.com",
                            "allocated_storage": "10",
                            "arn": "arn:aws:rds:eu-west-2:140541832011:db:terraform-20171011165717373500000001",
                            "auto_minor_version_upgrade": "true",
                            "availability_zone": "eu-west-2a",
                            "backup_retention_period": "0",
                            "backup_window": "08:27-08:57",
                            "ca_cert_identifier": "rds-ca-2015",
                            "copy_tags_to_snapshot": "false",
                            "db_subnet_group_name": "main",
                            "endpoint": "terraform-20171011165717373500000001.cdoadcw2ssuk.eu-west-2.rds.amazonaws.com:3306",
                            "engine": "mysql",
                            "engine_version": "5.7.17",
                            "hosted_zone_id": "Z1TTGA775OQIYO",
                            "iam_database_authentication_enabled": "false",
                            "id": "terraform-20171011165717373500000001",
                            "identifier": "terraform-20171011165717373500000001",
                            "instance_class": "db.t2.micro",
                            "iops": "0",
                            "kms_key_id": "",
                            "license_model": "general-public-license",
                            "maintenance_window": "fri:12:25-fri:12:55",
                            "monitoring_interval": "0",
                            "multi_az": "false",
                            "name": "wordpress",
                            "option_group_name": "default:mysql-5-7",
                            "parameter_group_name": "default.mysql5.7",
                            "password": "wordpress12345",
                            "port": "3306",
                            "publicly_accessible": "false",
                            "replicas.#": "0",
                            "replicate_source_db": "",
                            "resource_id": "db-MTQSIMAKALBKZTPWRU54UOSHZ4",
                            "security_group_names.#": "0",
                            "skip_final_snapshot": "true",
                            "status": "available",
                            "storage_encrypted": "false",
                            "storage_type": "gp2",
                            "tags.%": "0",
                            "timezone": "",
                            "username": "wordpress",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1023249935": "sg-354ea05d"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 2400000000000,
                                "delete": 2400000000000,
                                "update": 4800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_db_subnet_group.wp": {
                    "type": "aws_db_subnet_group",
                    "depends_on": [],
                    "primary": {
                        "id": "main",
                        "attributes": {
                            "arn": "arn:aws:rds:eu-west-2:140541832011:subgrp:main",
                            "description": "Managed by Terraform",
                            "id": "main",
                            "name": "main",
                            "subnet_ids.#": "2",
                            "subnet_ids.3686372886": "subnet-8afa87f1",
                            "subnet_ids.3809063202": "subnet-85ff76c8",
                            "tags.%": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_elb.elb": {
                    "type": "aws_elb",
                    "depends_on": [
                        "aws_security_group.elb"
                    ],
                    "primary": {
                        "id": "7digital-arranzm-elb",
                        "attributes": {
                            "access_logs.#": "0",
                            "availability_zones.#": "2",
                            "availability_zones.1501760113": "eu-west-2b",
                            "availability_zones.3230292939": "eu-west-2a",
                            "connection_draining": "true",
                            "connection_draining_timeout": "400",
                            "cross_zone_load_balancing": "true",
                            "dns_name": "7digital-arranzm-elb-189493676.eu-west-2.elb.amazonaws.com",
                            "health_check.#": "1",
                            "health_check.0.healthy_threshold": "2",
                            "health_check.0.interval": "30",
                            "health_check.0.target": "HTTP:80/healthcheck.php",
                            "health_check.0.timeout": "3",
                            "health_check.0.unhealthy_threshold": "2",
                            "id": "7digital-arranzm-elb",
                            "idle_timeout": "400",
                            "instances.#": "0",
                            "internal": "false",
                            "listener.#": "1",
                            "listener.3057123346.instance_port": "80",
                            "listener.3057123346.instance_protocol": "http",
                            "listener.3057123346.lb_port": "80",
                            "listener.3057123346.lb_protocol": "http",
                            "listener.3057123346.ssl_certificate_id": "",
                            "name": "7digital-arranzm-elb",
                            "security_groups.#": "1",
                            "security_groups.3194083597": "sg-55709e3d",
                            "source_security_group": "140541832011/elb",
                            "source_security_group_id": "sg-55709e3d",
                            "subnets.#": "2",
                            "subnets.3686372886": "subnet-8afa87f1",
                            "subnets.3809063202": "subnet-85ff76c8",
                            "tags.%": "1",
                            "tags.Name": "7digital-arranzm-elb",
                            "zone_id": "ZHURV8PSTC4K8"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_key_pair.wordpress": {
                    "type": "aws_key_pair",
                    "depends_on": [],
                    "primary": {
                        "id": "wordpress",
                        "attributes": {
                            "fingerprint": "29:7d:d9:26:06:85:73:b5:b7:a0:e6:1f:a7:1d:9c:ec",
                            "id": "wordpress",
                            "key_name": "wordpress",
                            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDbe/9BsPLYwyGU5n8Bry9RlLh5XcNycgDZX5WmtBRH3a02ykqxWOjI1EPoKubpKAYOEDnyBhqFJOypOtmybzDyiWEzyD4HT/ykWaroe9DggI8PkmTTlp5rMGAM5rNhX7LT8tcJVh8TDQQClqt+3eyenBbFRlNTI4e3R9+uIgmHansaTqt/F+rds7gl+lf4+fg7YCohDK4Fs8K0cAZ20bfBhDVfSb9ijXrCFipInzfVNvMHY8GX5z1GL3ayQIYYr9nLFfWsY+8ko+vdUykUGg4+NRdSXZae16ykvpGfOXLb2RWOVlWy16jCIZhkjxZJ8QHcceyzQbyJh75S4Z4SfZFn mijack@microserver"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_launch_configuration.wp": {
                    "type": "aws_launch_configuration",
                    "depends_on": [
                        "aws_key_pair.wordpress",
                        "aws_security_group.instances",
                        "data.aws_ami.ubuntu",
                        "data.template_file.init"
                    ],
                    "primary": {
                        "id": "7digital-arranzm20171011170022403700000002",
                        "attributes": {
                            "associate_public_ip_address": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "enable_monitoring": "true",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "7digital-arranzm20171011170022403700000002",
                            "image_id": "ami-e1f2e185",
                            "instance_type": "t2.micro",
                            "key_name": "wordpress",
                            "name": "7digital-arranzm20171011170022403700000002",
                            "name_prefix": "7digital-arranzm",
                            "root_block_device.#": "0",
                            "security_groups.#": "1",
                            "security_groups.4170117894": "sg-56709e3e",
                            "spot_price": "",
                            "user_data": "2f19baae1ef7a9df925974d5ad87c13256276a12",
                            "vpc_classic_link_id": "",
                            "vpc_classic_link_security_groups.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.elb": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-55709e3d",
                        "attributes": {
                            "description": "Allow  inbound traffic to elb",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.ipv6_cidr_blocks.#": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-55709e3d",
                            "ingress.#": "1",
                            "ingress.2214680975.cidr_blocks.#": "1",
                            "ingress.2214680975.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2214680975.from_port": "80",
                            "ingress.2214680975.ipv6_cidr_blocks.#": "0",
                            "ingress.2214680975.protocol": "tcp",
                            "ingress.2214680975.security_groups.#": "0",
                            "ingress.2214680975.self": "false",
                            "ingress.2214680975.to_port": "80",
                            "name": "elb",
                            "owner_id": "140541832011",
                            "tags.%": "0",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.instances": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "aws_security_group.elb"
                    ],
                    "primary": {
                        "id": "sg-56709e3e",
                        "attributes": {
                            "description": "Allow all inbound traffic",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.ipv6_cidr_blocks.#": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-56709e3e",
                            "ingress.#": "2",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.ipv6_cidr_blocks.#": "0",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "ingress.738822097.cidr_blocks.#": "1",
                            "ingress.738822097.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.738822097.from_port": "80",
                            "ingress.738822097.ipv6_cidr_blocks.#": "0",
                            "ingress.738822097.protocol": "tcp",
                            "ingress.738822097.security_groups.#": "1",
                            "ingress.738822097.security_groups.3194083597": "sg-55709e3d",
                            "ingress.738822097.self": "false",
                            "ingress.738822097.to_port": "80",
                            "name": "allow_all",
                            "owner_id": "140541832011",
                            "tags.%": "0",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.rds": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "data.aws_vpc.selected"
                    ],
                    "primary": {
                        "id": "sg-354ea05d",
                        "attributes": {
                            "description": "Allow  inbound traffic to rds",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.ipv6_cidr_blocks.#": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-354ea05d",
                            "ingress.#": "1",
                            "ingress.62090335.cidr_blocks.#": "1",
                            "ingress.62090335.cidr_blocks.0": "192.168.0.0/16",
                            "ingress.62090335.from_port": "3306",
                            "ingress.62090335.ipv6_cidr_blocks.#": "0",
                            "ingress.62090335.protocol": "tcp",
                            "ingress.62090335.security_groups.#": "0",
                            "ingress.62090335.self": "false",
                            "ingress.62090335.to_port": "3306",
                            "name": "rds",
                            "owner_id": "140541832011",
                            "tags.%": "0",
                            "vpc_id": "vpc-579dde3e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.aws_ami.ubuntu": {
                    "type": "aws_ami",
                    "depends_on": [],
                    "primary": {
                        "id": "ami-e1f2e185",
                        "attributes": {
                            "architecture": "x86_64",
                            "block_device_mappings.#": "3",
                            "block_device_mappings.1634610537.device_name": "/dev/sdb",
                            "block_device_mappings.1634610537.ebs.%": "0",
                            "block_device_mappings.1634610537.no_device": "",
                            "block_device_mappings.1634610537.virtual_name": "ephemeral0",
                            "block_device_mappings.2547816212.device_name": "/dev/sda1",
                            "block_device_mappings.2547816212.ebs.%": "6",
                            "block_device_mappings.2547816212.ebs.delete_on_termination": "true",
                            "block_device_mappings.2547816212.ebs.encrypted": "false",
                            "block_device_mappings.2547816212.ebs.iops": "0",
                            "block_device_mappings.2547816212.ebs.snapshot_id": "snap-0d265cc63fd24834e",
                            "block_device_mappings.2547816212.ebs.volume_size": "8",
                            "block_device_mappings.2547816212.ebs.volume_type": "gp2",
                            "block_device_mappings.2547816212.no_device": "",
                            "block_device_mappings.2547816212.virtual_name": "",
                            "block_device_mappings.3850042718.device_name": "/dev/sdc",
                            "block_device_mappings.3850042718.ebs.%": "0",
                            "block_device_mappings.3850042718.no_device": "",
                            "block_device_mappings.3850042718.virtual_name": "ephemeral1",
                            "creation_date": "2017-09-21T21:20:27.000Z",
                            "description": "Canonical, Ubuntu, 16.04 LTS, amd64 xenial image build on 2017-09-19",
                            "filter.#": "5",
                            "filter.1281954306.name": "root-device-type",
                            "filter.1281954306.values.#": "1",
                            "filter.1281954306.values.0": "ebs",
                            "filter.3064759198.name": "name",
                            "filter.3064759198.values.#": "1",
                            "filter.3064759198.values.0": "*ubuntu-xenial-16.04-amd64-server*",
                            "filter.3386043752.name": "architecture",
                            "filter.3386043752.values.#": "1",
                            "filter.3386043752.values.0": "x86_64",
                            "filter.3841461918.name": "owner-id",
                            "filter.3841461918.values.#": "1",
                            "filter.3841461918.values.0": "099720109477",
                            "filter.490168357.name": "virtualization-type",
                            "filter.490168357.values.#": "1",
                            "filter.490168357.values.0": "hvm",
                            "hypervisor": "xen",
                            "id": "ami-e1f2e185",
                            "image_id": "ami-e1f2e185",
                            "image_location": "099720109477/ubuntu/images/hvm-ssd/ubuntu-xenial-16.04-amd64-server-20170919",
                            "image_type": "machine",
                            "most_recent": "true",
                            "name": "ubuntu/images/hvm-ssd/ubuntu-xenial-16.04-amd64-server-20170919",
                            "owner_id": "099720109477",
                            "product_codes.#": "0",
                            "public": "true",
                            "root_device_name": "/dev/sda1",
                            "root_device_type": "ebs",
                            "sriov_net_support": "simple",
                            "state": "available",
                            "state_reason.%": "2",
                            "state_reason.code": "UNSET",
                            "state_reason.message": "UNSET",
                            "tags.#": "0",
                            "virtualization_type": "hvm"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.aws_vpc.selected": {
                    "type": "aws_vpc",
                    "depends_on": [],
                    "primary": {
                        "id": "vpc-579dde3e",
                        "attributes": {
                            "cidr_block": "192.168.0.0/16",
                            "default": "false",
                            "dhcp_options_id": "dopt-f120c298",
                            "enable_dns_hostnames": "true",
                            "enable_dns_support": "true",
                            "id": "vpc-579dde3e",
                            "instance_tenancy": "default",
                            "state": "available",
                            "tags.%": "1",
                            "tags.Name": "7digital-arranzm-test"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.init": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_db_instance.wp",
                        "aws_elb.elb"
                    ],
                    "primary": {
                        "id": "8678150fd78b6b48174913cbfabc6f9040e509b4014eeb1d27bae770802a1fe4",
                        "attributes": {
                            "id": "8678150fd78b6b48174913cbfabc6f9040e509b4014eeb1d27bae770802a1fe4",
                            "rendered": "#!/bin/bash\napt-get update\napt-get install apache2  libapache2-mod-php7.0 php7.0-mysql wget curl mysql-client -y\n\n\ncd /tmp/\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\n\nchmod +x wp-cli.phar\nmv wp-cli.phar /usr/local/bin/wp\n\ncd /var/www/html\nrm index.html\nwp --allow-root core download --version=4.7\nchown www-data /var/www/html -R\ncp wp-config-sample.php wp-config.php\n\nsed -i s/\"database_name_here\"/\"wordpress\"/ /var/www/html/wp-config.php\nsed -i s/\"username_here\"/\"wordpress\"/ /var/www/html/wp-config.php\nsed -i s/\"password_here\"/\"wordpress12345\"/ /var/www/html/wp-config.php\nsed -i s/\"localhost\"/\"terraform-20171011165717373500000001.cdoadcw2ssuk.eu-west-2.rds.amazonaws.com\"/ /var/www/html/wp-config.php\n\necho \"\u003c?php echo 'healthy'; ?\u003e\" \u003e /var/www/html/healthcheck.php\n\n#This will populate the database only if it does not exists\nwp --allow-root core install --url=7digital-arranzm-elb-189493676.eu-west-2.elb.amazonaws.com --title=\"Page title\" --admin_user=\"admin\" --admin_password=\"wordpress12345\" --admin_email=\"m.arranz.perez@gmail.com\" --path=/var/www/html/\n\npost_number=$(wp --allow-root post list --field=ID|wc -l)\n\n\n#This will run only first time\nif [ \"$post_number\" -eq \"1\" ]\nthen\nwp --allow-root post delete 1\nwp --allow-root post create --post_type=post --post_title='Lorem ipsum' --post_content=\"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. \u003cimg src='https://img.discogs.com/jKTmuxcsYe2TqcahU3QqVXJLssU=/fit-in/600x600/filters:strip_icc():format(jpeg):mode_rgb():quality(90)/discogs-images/R-1873013-1471100381-3022.jpeg.jpg'\u003e\" --post_status=publish\nfi\n\nwait 10\nservice apache2 restart\n",
                            "template": "#!/bin/bash\napt-get update\napt-get install apache2  libapache2-mod-php7.0 php7.0-mysql wget curl mysql-client -y\n\n\ncd /tmp/\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\n\nchmod +x wp-cli.phar\nmv wp-cli.phar /usr/local/bin/wp\n\ncd /var/www/html\nrm index.html\nwp --allow-root core download --version=4.7\nchown www-data /var/www/html -R\ncp wp-config-sample.php wp-config.php\n\nsed -i s/\"database_name_here\"/\"${db_name}\"/ /var/www/html/wp-config.php\nsed -i s/\"username_here\"/\"${user_name}\"/ /var/www/html/wp-config.php\nsed -i s/\"password_here\"/\"${password}\"/ /var/www/html/wp-config.php\nsed -i s/\"localhost\"/\"${host_name}\"/ /var/www/html/wp-config.php\n\necho \"\u003c?php echo 'healthy'; ?\u003e\" \u003e /var/www/html/healthcheck.php\n\n#This will populate the database only if it does not exists\nwp --allow-root core install --url=${elb_url} --title=\"Page title\" --admin_user=\"admin\" --admin_password=\"${password}\" --admin_email=\"m.arranz.perez@gmail.com\" --path=/var/www/html/\n\npost_number=$(wp --allow-root post list --field=ID|wc -l)\n\n\n#This will run only first time\nif [ \"$post_number\" -eq \"1\" ]\nthen\nwp --allow-root post delete 1\nwp --allow-root post create --post_type=post --post_title='Lorem ipsum' --post_content=\"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. \u003cimg src='https://img.discogs.com/jKTmuxcsYe2TqcahU3QqVXJLssU=/fit-in/600x600/filters:strip_icc():format(jpeg):mode_rgb():quality(90)/discogs-images/R-1873013-1471100381-3022.jpeg.jpg'\u003e\" --post_status=publish\nfi\n\nwait 10\nservice apache2 restart\n",
                            "vars.%": "6",
                            "vars.db_name": "wordpress",
                            "vars.elb_url": "7digital-arranzm-elb-189493676.eu-west-2.elb.amazonaws.com",
                            "vars.host_name": "terraform-20171011165717373500000001.cdoadcw2ssuk.eu-west-2.rds.amazonaws.com",
                            "vars.password": "wordpress12345",
                            "vars.user_name": "wordpress",
                            "vars.wp_package_url": "https://wordpress.org/wordpress-4.8.2.tar.gz"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        }
    ]
}
